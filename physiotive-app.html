<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physiotive - Posture & Wellness App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .main-container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .page {
            display: none;
            width: 100%;
            max-width: 1000px;
        }

        .page.active {
            display: block;
        }

        /* LOGIN PAGE */
        .login-page {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            font-size: 3em;
            color: #667eea;
            margin-bottom: 10px;
        }

        .disclaimer-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            color: #856404;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* DASHBOARD PAGE */
        .dashboard-page {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .dashboard-header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .time-display {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .countdown {
            font-size: 1.2em;
            margin-top: 10px;
            font-weight: bold;
        }

        .dashboard-content {
            padding: 30px;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
        }

        .notification-alert {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            color: #155724;
            display: none;
        }

        .notification-alert.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .exercise-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .exercise-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .food-category {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .food-category h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .food-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .food-input-group input {
            flex: 1;
        }

        .food-input-group button {
            padding: 10px 20px;
        }

        .food-list {
            margin-top: 10px;
        }

        .food-item {
            background: white;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .tips-list {
            list-style: none;
        }

        .tips-list li {
            background: #e7f3ff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8em;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .stat-box .number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-box .label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .nav-tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: none;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .nav-tab:hover {
            color: #667eea;
        }

        .filter-select {
            margin: 15px 0;
            width: 100%;
            max-width: 300px;
        }

        .water-progress {
            text-align: center;
            margin: 20px 0;
        }

        .water-glasses {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .glass {
            width: 40px;
            height: 60px;
            border: 2px solid #667eea;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .glass.filled {
            background: #667eea;
            color: white;
        }

        .glass:hover {
            transform: scale(1.1);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
            width: auto;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        @media (max-width: 768px) {
            .login-page {
                padding: 20px;
            }

            .dashboard-content {
                padding: 20px;
                min-height: 300px;
            }

            .exercise-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- LOGIN PAGE -->
        <div class="page login-page active" id="loginPage">
            <div class="login-header">
                <h1>üè• Physiotive</h1>
                <p>Your Personal Posture & Wellness Companion</p>
            </div>

            <div class="disclaimer-box">
                <strong>‚ö†Ô∏è IMPORTANT DISCLAIMER</strong>
                <p>This app is designed as a notification and wellness tracking tool only. It is NOT a substitute for professional medical advice, diagnosis, or treatment. This app is intended for users aged 18-30 years old. Always consult with a qualified healthcare provider for personalized medical guidance.</p>
            </div>

            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="name">Your Name *</label>
                    <input type="text" id="name" required placeholder="Enter your full name">
                </div>

                <div class="form-group">
                    <label for="age">Age (18-30) *</label>
                    <input type="number" id="age" min="18" max="30" required placeholder="Enter your age">
                </div>

                <div class="form-group">
                    <label for="gender">Gender *</label>
                    <select id="gender" required>
                        <option value="">-- Select Gender --</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Reminder Interval *</label>
                    <div class="radio-group">
                        <label><input type="radio" name="interval" value="30" required> Every 30 minutes</label>
                        <label><input type="radio" name="interval" value="60"> Every 1 hour</label>
                    </div>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="agree" required>
                    <label for="agree">I am 18-30 years old and agree to the terms</label>
                </div>

                <button type="submit" class="btn">‚úì Start Using Physiotive</button>
            </form>
        </div>

        <!-- DASHBOARD PAGE -->
        <div class="page dashboard-page" id="dashboardPage">
            <div class="dashboard-header">
                <h1>Welcome, <span id="userName">User</span>! üëã</h1>
                <div class="time-display" id="timeDisplay">Loading...</div>
                <div class="countdown" id="countdownDisplay">Next reminder: calculating...</div>
            </div>

            <div class="dashboard-content">
                <div class="notification-alert" id="notificationAlert">
                    <h3>‚è∞ Time to Check Your Posture!</h3>
                    <p id="exerciseSuggestion">Try neck stretches</p>
                    <button class="btn btn-success" onclick="markPostureDone()" style="width: auto; margin-top: 10px;">‚úì Mark as Done</button>
                </div>

                <!-- NAVIGATION TABS -->
                <div class="nav-tabs">
                    <button class="nav-tab active" onclick="switchSection('exercises')">üí™ Exercises</button>
                    <button class="nav-tab" onclick="switchSection('food')">üçΩÔ∏è Food Track</button>
                    <button class="nav-tab" onclick="switchSection('tips')">üí° Tips</button>
                    <button class="nav-tab" onclick="switchSection('report')">üìä Report</button>
                    <button class="nav-tab" onclick="switchSection('settings')">‚öôÔ∏è Settings</button>
                </div>

                <!-- EXERCISES SECTION -->
                <div class="section active" id="exercisesSection">
                    <h2>Exercise Library</h2>
                    <select class="filter-select" id="categoryFilter" onchange="filterExercises()">
                        <option value="">All Exercises</option>
                        <option value="stretching">üîÑ Stretching</option>
                        <option value="upper_body">üí™ Upper Body</option>
                        <option value="lower_body">ü¶µ Lower Body</option>
                        <option value="strengthening">üèãÔ∏è Strengthening</option>
                    </select>
                    <div class="exercise-grid" id="exerciseGrid"></div>
                </div>

                <!-- FOOD TRACKING SECTION -->
                <div class="section" id="foodSection">
                    <h2>Food & Nutrition Tracking</h2>
                    <div id="foodCategories"></div>
                    <div class="water-progress">
                        <h3>üíß Water Intake Goal: 8 glasses/day</h3>
                        <div class="water-glasses" id="waterGlasses"></div>
                        <p>Current: <span id="waterCount">0</span>/8 glasses</p>
                        <button class="btn btn-success" onclick="addWater()" style="width: auto;">+ Add Glass</button>
                    </div>
                </div>

                <!-- TIPS SECTION -->
                <div class="section" id="tipsSection">
                    <h2>Personalized Wellness Tips</h2>
                    <ul class="tips-list" id="tipsList"></ul>
                </div>

                <!-- REPORT SECTION -->
                <div class="section" id="reportSection">
                    <h2>üìä Weekly Health Report</h2>
                    <div id="reportContent">
                        <p>Complete your daily activities to see your progress report.</p>
                    </div>
                    <button class="btn btn-secondary" onclick="generateReport()" style="width: auto;">Generate Report</button>
                </div>

                <!-- SETTINGS SECTION -->
                <div class="section" id="settingsSection">
                    <h2>‚öôÔ∏è Settings</h2>
                    <button class="btn btn-secondary" onclick="logout()">üîÑ Change Profile</button>
                    <br><br>
                    <button class="btn btn-danger" onclick="resetData()">üóëÔ∏è Reset All Data</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // App State Management
        const appState = {
            user: null,
            session: {
                postureChecks: 0,
                exercisesCompleted: [],
                foodLogs: {},
                waterCount: 0,
                sessionStart: null,
                notificationInterval: null,
                intervalTimer: null
            }
        };

        // Exercise Data
        const exercises = [
            { name: "Neck Stretch", duration: "30 sec", description: "Gently tilt head to each side", target: "Neck", category: "stretching" },
            { name: "Shoulder Blade Squeeze", duration: "10 reps", description: "Squeeze shoulders back", target: "Upper Back", category: "upper_body" },
            { name: "Chin Tucks", duration: "10 reps", description: "Pull chin back gently", target: "Neck/Posture", category: "upper_body" },
            { name: "Wrist Stretches", duration: "20 sec", description: "Extend and pull fingers back", target: "Wrist", category: "stretching" },
            { name: "Seated Spinal Twist", duration: "30 sec each", description: "Twist torso side to side", target: "Spine/Core", category: "stretching" },
            { name: "Hip Flexor Stretch", duration: "30 sec each", description: "Lunge position, push hips forward", target: "Hips", category: "lower_body" },
            { name: "Cat-Cow Stretch", duration: "10 cycles", description: "Alternate arching and rounding back", target: "Spine", category: "stretching" },
            { name: "Chest Opener", duration: "30 sec", description: "Clasp hands behind back, lift chest", target: "Chest", category: "upper_body" },
            { name: "Standing Quad Stretch", duration: "30 sec each", description: "Pull foot to buttocks", target: "Legs", category: "lower_body" },
            { name: "Desk Push-ups", duration: "15 reps", description: "Hands on desk edge, lower and push", target: "Chest/Arms", category: "strengthening" },
            { name: "Tricep Dips", duration: "15 reps", description: "Use chair, lower and push up", target: "Arms", category: "strengthening" },
            { name: "Wall Angels", duration: "15 reps", description: "Move arms up/down against wall", target: "Shoulders", category: "upper_body" }
        ];

        // Age Tips
        const ageTips = {
            "18-22": ["Build healthy habits early", "Focus on flexibility & core strength", "Stay hydrated (8-10 glasses daily)", "Take regular breaks"],
            "23-26": ["Maintain consistent exercise routine", "Pay attention to ergonomics", "Balance meal times", "Prioritize 7-9 hours sleep"],
            "27-30": ["Focus on injury prevention", "Monitor stress levels", "Adjust nutrition for active lifestyle", "Invest in ergonomic setup"]
        };

        // Gender Tips
        const genderTips = {
            "Male": ["Focus on upper body & core", "Protein intake: 1.6-2.2g per kg", "Monitor cardiovascular health"],
            "Female": ["Strengthen back & core muscles", "Adequate calcium & iron intake", "Focus on bone density"],
            "Other": ["Customize routine for comfort", "Overall wellness focus", "Consult healthcare provider"]
        };

        const foodCategories = ["Breakfast", "Lunch", "Dinner", "Snacks"];

        // LOGIN HANDLER
        function handleLogin(event) {
            event.preventDefault();

            const name = document.getElementById('name').value.trim();
            const age = parseInt(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const interval = parseInt(document.querySelector('input[name="interval"]:checked').value);
            const agree = document.getElementById('agree').checked;

            if (!name || !age || !gender || !interval || !agree) {
                alert('Please fill all fields correctly and agree to terms');
                return;
            }

            if (age < 18 || age > 30) {
                alert('Age must be between 18-30');
                return;
            }

            // Store user data
            appState.user = { name, age, gender, interval };
            appState.session.notificationInterval = interval * 60 * 1000;
            appState.session.sessionStart = new Date();
            appState.session.foodLogs = {};
            foodCategories.forEach(cat => {
                appState.session.foodLogs[cat] = [];
            });

            // Switch pages
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('dashboardPage').classList.add('active');

            // Initialize dashboard
            document.getElementById('userName').textContent = name;
            loadExercises();
            loadFoodTracking();
            generateTips();
            startReminders();
            updateTime();
            setInterval(updateTime, 1000);

            // Request notifications
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }

        // LOAD EXERCISES
        function loadExercises() {
            const grid = document.getElementById('exerciseGrid');
            grid.innerHTML = '';
            exercises.forEach(ex => {
                const card = document.createElement('div');
                card.className = 'exercise-card';
                card.setAttribute('data-category', ex.category);
                card.innerHTML = `
                    <h3>${ex.name}</h3>
                    <p><strong>Duration:</strong> ${ex.duration}</p>
                    <p><strong>Target:</strong> ${ex.target}</p>
                    <p>${ex.description}</p>
                    <button class="btn btn-small" onclick="completeExercise('${ex.name}')">Mark Done</button>
                `;
                grid.appendChild(card);
            });
        }

        // FILTER EXERCISES
        function filterExercises() {
            const filter = document.getElementById('categoryFilter').value;
            document.querySelectorAll('.exercise-card').forEach(card => {
                if (!filter || card.getAttribute('data-category') === filter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // COMPLETE EXERCISE
        function completeExercise(name) {
            if (!appState.session.exercisesCompleted.includes(name)) {
                appState.session.exercisesCompleted.push(name);
                alert(`‚úì Great job! "${name}" added to your completed exercises!`);
            } else {
                alert('You already completed this exercise today');
            }
        }

        // LOAD FOOD TRACKING
        function loadFoodTracking() {
            const container = document.getElementById('foodCategories');
            container.innerHTML = '';
            foodCategories.forEach(cat => {
                const section = document.createElement('div');
                section.className = 'food-category';
                section.innerHTML = `
                    <h3>${cat}</h3>
                    <div class="food-input-group">
                        <input type="text" id="food-${cat}" placeholder="What did you eat?" />
                        <input type="number" id="cal-${cat}" placeholder="Calories" style="width: 120px;" />
                        <button class="btn" onclick="addFood('${cat}')" style="padding: 10px 15px;">Add</button>
                    </div>
                    <div class="food-list" id="list-${cat}"></div>
                `;
                container.appendChild(section);
            });
            refreshFoodLists();
        }

        // ADD FOOD
        function addFood(category) {
            const foodInput = document.getElementById(`food-${category}`);
            const calInput = document.getElementById(`cal-${category}`);
            const item = foodInput.value.trim();
            const calories = parseInt(calInput.value) || 0;

            if (!item) {
                alert('Please enter a food item');
                return;
            }

            appState.session.foodLogs[category].push({ item, calories });
            foodInput.value = '';
            calInput.value = '';
            refreshFoodLists();
        }

        // REFRESH FOOD LISTS
        function refreshFoodLists() {
            foodCategories.forEach(cat => {
                const listDiv = document.getElementById(`list-${cat}`);
                listDiv.innerHTML = '';
                appState.session.foodLogs[cat].forEach((food, idx) => {
                    const item = document.createElement('div');
                    item.className = 'food-item';
                    item.innerHTML = `
                        <span>${food.item} (${food.calories} cal)</span>
                        <button class="btn btn-small" onclick="removeFood('${cat}', ${idx})">Delete</button>
                    `;
                    listDiv.appendChild(item);
                });
            });
        }

        // REMOVE FOOD
        function removeFood(category, index) {
            appState.session.foodLogs[category].splice(index, 1);
            refreshFoodLists();
        }

        // ADD WATER
        function addWater() {
            if (appState.session.waterCount < 8) {
                appState.session.waterCount++;
                updateWaterGlasses();
            } else {
                alert('üéâ Great! You reached your 8-glass goal for the day!');
            }
        }

        // UPDATE WATER GLASSES DISPLAY
        function updateWaterGlasses() {
            const container = document.getElementById('waterGlasses');
            container.innerHTML = '';
            for (let i = 1; i <= 8; i++) {
                const glass = document.createElement('div');
                glass.className = 'glass';
                if (i <= appState.session.waterCount) {
                    glass.classList.add('filled');
                }
                glass.textContent = i;
                glass.onclick = () => {
                    appState.session.waterCount = i;
                    updateWaterGlasses();
                };
                container.appendChild(glass);
            }
            document.getElementById('waterCount').textContent = appState.session.waterCount;
        }

        // GENERATE TIPS
        function generateTips() {
            const age = appState.user.age;
            let ageGroup;
            if (age <= 22) ageGroup = "18-22";
            else if (age <= 26) ageGroup = "23-26";
            else ageGroup = "27-30";

            const tipsList = document.getElementById('tipsList');
            tipsList.innerHTML = '';

            const tips = [...(ageTips[ageGroup] || []), ...(genderTips[appState.user.gender] || [])];
            tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                tipsList.appendChild(li);
            });
        }

        // SWITCH SECTION
        function switchSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

            document.getElementById(section + 'Section').classList.add('active');
            event.target.classList.add('active');

            if (section === 'report') {
                generateReport();
            }
        }

        // GENERATE REPORT
        function generateReport() {
            const totalExercises = appState.session.exercisesCompleted.length;
            let totalCalories = 0;
            let totalFoodItems = 0;

            Object.values(appState.session.foodLogs).forEach(logs => {
                logs.forEach(food => {
                    totalCalories += food.calories;
                    totalFoodItems++;
                });
            });

            const avgCalories = totalFoodItems > 0 ? Math.round(totalCalories / totalFoodItems) : 0;
            const exercisePercentage = Math.round((totalExercises / 12) * 100);

            const html = `
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="number">${appState.session.postureChecks}</div>
                        <div class="label">Posture Checks</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${totalExercises}</div>
                        <div class="label">Exercises Done</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${appState.session.waterCount}</div>
                        <div class="label">Glasses of Water</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${avgCalories}</div>
                        <div class="label">Avg Calories</div>
                    </div>
                </div>

                <h3>Overall Progress</h3>
                <p>Exercises Completed: ${totalExercises}/12</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${exercisePercentage}%">${exercisePercentage}%</div>
                </div>

                <h3>üí° Recommendations</h3>
                <ul>
                    <li>${totalExercises < 6 ? '‚úÖ Try to complete at least 6 exercises today' : 'üéâ Great exercise routine!'}</li>
                    <li>${appState.session.waterCount < 8 ? 'üíß Keep hydrating! Aim for 8 glasses' : 'üíß Excellent hydration!'}</li>
                    <li>${appState.session.postureChecks < 10 ? 'ü™ë Stay alert for posture reminders' : 'ü™ë Great posture awareness!'}</li>
                </ul>
            `;

            document.getElementById('reportContent').innerHTML = html;
        }

        // TIME UPDATE
        function updateTime() {
            const now = new Date();
            document.getElementById('timeDisplay').textContent = now.toLocaleTimeString();

            if (appState.session.sessionStart) {
                const timeSinceStart = now - appState.session.sessionStart;
                const nextReminder = appState.session.sessionStart.getTime() + (Math.floor(timeSinceStart / appState.session.notificationInterval) + 1) * appState.session.notificationInterval;
                const diff = nextReminder - now.getTime();

                const minutes = Math.floor(diff / 60000);
                const seconds = Math.floor((diff % 60000) / 1000);

                document.getElementById('countdownDisplay').textContent = `Next reminder: ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // START REMINDERS
        function startReminders() {
            showReminder();
            appState.session.intervalTimer = setInterval(showReminder, appState.session.notificationInterval);
        }

        // SHOW REMINDER
        function showReminder() {
            const randomExercise = exercises[Math.floor(Math.random() * exercises.length)];
            document.getElementById('exerciseSuggestion').textContent = `Try: ${randomExercise.name}`;
            document.getElementById('notificationAlert').classList.add('show');

            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Physiotive Posture Reminder', {
                    body: `Time to check your posture! Try: ${randomExercise.name}`,
                    tag: 'posture-check'
                });
            }

            // Play sound
            playBeep();

            setTimeout(() => {
                document.getElementById('notificationAlert').classList.remove('show');
            }, 10000);
        }

        // MARK POSTURE DONE
        function markPostureDone() {
            appState.session.postureChecks++;
            document.getElementById('notificationAlert').classList.remove('show');
            alert('‚úì Great! Posture check logged.');
        }

        // PLAY BEEP SOUND
        function playBeep() {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.frequency.value = 800;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.1);
        }

        // LOGOUT
        function logout() {
            if (confirm('Change profile? This will reset your session.')) {
                appState.session = {
                    postureChecks: 0,
                    exercisesCompleted: [],
                    foodLogs: {},
                    waterCount: 0,
                    sessionStart: null,
                    notificationInterval: null,
                    intervalTimer: null
                };
                clearInterval(appState.session.intervalTimer);

                document.getElementById('loginPage').classList.add('active');
                document.getElementById('dashboardPage').classList.remove('active');

                document.getElementById('loginForm').reset();
            }
        }

        // RESET DATA
        function resetData() {
            if (confirm('Reset all data for today? This cannot be undone.')) {
                appState.session.postureChecks = 0;
                appState.session.exercisesCompleted = [];
                appState.session.waterCount = 0;
                foodCategories.forEach(cat => {
                    appState.session.foodLogs[cat] = [];
                });
                updateWaterGlasses();
                refreshFoodLists();
                alert('‚úì Data reset successfully');
            }
        }

        // Initialize water glasses on load
        document.addEventListener('DOMContentLoaded', () => {
            updateWaterGlasses();
        });
    </script>
</body>
</html>
